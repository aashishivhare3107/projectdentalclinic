{"version":3,"file":"static/js/657.95a5dc4f.chunk.js","mappings":"6QAUAA,EAAAA,EAAAA,SAAAA,QAAyBC,4BAuGzB,UArGA,WACE,IAAMC,GAAWC,EAAAA,EAAAA,MACjB,GAAsCC,EAAAA,EAAAA,UAAS,CAC7CC,MAAO,GACPC,SAAU,KACV,eAHKC,EAAW,KAAEC,EAAc,KAI5BC,GAAWC,EAAAA,EAAAA,MAEXC,EAAc,SAACC,GACnB,MAAwBA,EAAEC,OAAlBC,EAAI,EAAJA,KAAMC,EAAK,EAALA,MACd,OAAOP,GAAe,kBACjBD,GAAW,cACbO,EAAOC,IAEZ,EAEMC,EAAU,yCAAG,WAAOJ,GAAC,kFAGA,GAHA,SAEvBA,EAAEK,iBACMZ,EAAoBE,EAApBF,MAAOC,EAAaC,EAAbD,SACVD,GAAUC,EAAQ,yCACdY,EAAAA,GAAAA,MAAY,oCAAkC,YAC5CZ,EAASa,OAAS,GAAC,yCACrBD,EAAAA,GAAAA,MAAY,gDAA8C,wBAG5CA,EAAAA,GAAAA,QACrBlB,EAAAA,EAAAA,KAAW,cAAe,CACxBK,MAAAA,EACAC,SAAAA,IAEF,CACEc,QAAS,gBACTC,QAAS,qBACTC,MAAO,uBACPC,QAAS,oBAEX,KAAD,YAXOC,EAAI,EAAJA,KAYRC,aAAaC,QAAQ,QAASF,EAAKG,OACnCzB,GAAS0B,EAAAA,EAAAA,KAAYC,EAAAA,EAAAA,GAAWL,EAAKG,OAAOG,SAC5CC,GAAQF,EAAAA,EAAAA,GAAWL,EAAKG,OAAOG,QAAQ,2IAI1C,gBA5Be,sCA8BVC,EAAO,yCAAG,WAAOC,GAAE,sGAEFC,EAAAA,EAAAA,GAAU,iBAAD,OAAkBD,IAAM,KAAD,EACvB,OADtBE,EAAI,OACVhC,GAAS0B,EAAAA,EAAAA,IAAYM,IAAO,kBACrBzB,EAAS,oBAAkB,wHAIrC,gBARY,sCAUb,OACE,oBAAS0B,UAAU,+BAA8B,UAC/C,iBAAKA,UAAU,iCAAgC,WAC7C,eAAIA,UAAU,eAAc,SAAC,aAC7B,kBACEC,SAAUpB,EACVmB,UAAU,gBAAe,WAEzB,kBACEE,KAAK,QACLvB,KAAK,QACLqB,UAAU,aACVG,YAAY,mBACZvB,MAAOR,EAAYF,MACnBkC,SAAU5B,KAEZ,kBACE0B,KAAK,WACLvB,KAAK,WACLqB,UAAU,aACVG,YAAY,sBACZvB,MAAOR,EAAYD,SACnBiC,SAAU5B,KAEZ,mBACE0B,KAAK,SACLF,UAAU,eAAc,SACzB,gBAIH,yBAAG,cACW,KACZ,SAAC,KAAO,CACNA,UAAU,aACVK,GAAI,YAAY,SACjB,oBAOX,C","sources":["pages/Login2.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport \"../styles/register.css\";\nimport axios from \"axios\";\nimport toast from \"react-hot-toast\";\nimport { useDispatch } from \"react-redux\";\nimport { setUserInfo } from \"../redux/reducers/rootSlice\";\nimport jwt_decode from \"jwt-decode\";\nimport fetchData from \"../helper/apiCall\";\n\naxios.defaults.baseURL = process.env.REACT_APP_SERVER_DOMAIN;\n\nfunction Login() {\n  const dispatch = useDispatch();\n  const [formDetails, setFormDetails] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const navigate = useNavigate();\n\n  const inputChange = (e) => {\n    const { name, value } = e.target;\n    return setFormDetails({\n      ...formDetails,\n      [name]: value,\n    });\n  };\n\n  const formSubmit = async (e) => {\n    try {\n      e.preventDefault();\n      const { email, password } = formDetails;\n      if (!email || !password) {\n        return toast.error(\"Input field should not be empty\");\n      } else if (password.length < 5) {\n        return toast.error(\"Password must be at least 5 characters long\");\n      }\n\n      const { data } = await toast.promise(\n        axios.post(\"/user/login\", {\n          email,\n          password,\n        }),\n        {\n          pending: \"Logging in...\",\n          success: \"Login successfully\",\n          error: \"Unable to login user\",\n          loading: \"Logging user...\",\n        }\n      );\n      localStorage.setItem(\"token\", data.token);\n      dispatch(setUserInfo(jwt_decode(data.token).userId));\n      getUser(jwt_decode(data.token).userId);\n    } catch (error) {\n      return error;\n    }\n  };\n\n  const getUser = async (id) => {\n    try {\n      const temp = await fetchData(`/user/getuser/${id}`);\n      dispatch(setUserInfo(temp));\n      return navigate(\"/applyfordoctor\");\n    } catch (error) {\n      return error;\n    }\n  };\n\n  return (\n    <section className=\"register-section flex-center\">\n      <div className=\"register-container flex-center\">\n        <h2 className=\"form-heading\">Sign In</h2>\n        <form\n          onSubmit={formSubmit}\n          className=\"register-form\"\n        >\n          <input\n            type=\"email\"\n            name=\"email\"\n            className=\"form-input\"\n            placeholder=\"Enter your email\"\n            value={formDetails.email}\n            onChange={inputChange}\n          />\n          <input\n            type=\"password\"\n            name=\"password\"\n            className=\"form-input\"\n            placeholder=\"Enter your password\"\n            value={formDetails.password}\n            onChange={inputChange}\n          />\n          <button\n            type=\"submit\"\n            className=\"btn form-btn\"\n          >\n            sign in\n          </button>\n        </form>\n        <p>\n          Not a user?{\" \"}\n          <NavLink\n            className=\"login-link\"\n            to={\"/register\"}\n          >\n            Register\n          </NavLink>\n        </p>\n      </div>\n    </section>\n  );\n}\n\nexport default Login;\n"],"names":["axios","process","dispatch","useDispatch","useState","email","password","formDetails","setFormDetails","navigate","useNavigate","inputChange","e","target","name","value","formSubmit","preventDefault","toast","length","pending","success","error","loading","data","localStorage","setItem","token","setUserInfo","jwt_decode","userId","getUser","id","fetchData","temp","className","onSubmit","type","placeholder","onChange","to"],"sourceRoot":""}